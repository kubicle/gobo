!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.g)define([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.gobo=t()}}(function(){return function t(i,s,h){function a(e,r){if(!s[e]){if(!i[e]){var n="function"==typeof require&&require;if(!r&&n)return n(e,!0);if(o)return o(e,!0);var f=new Error("Cannot find module '"+e+"'");throw f.code="MODULE_NOT_FOUND",f}var l=s[e]={exports:{}};i[e][0].call(l.exports,function(t){var s=i[e][1][t];return a(s||t)},l,l.exports,t,i,s,h)}return s[e].exports}for(var o="function"==typeof require&&require,e=0;e<h.length;e++)a(h[e]);return a}({1:[function(t,i,s){"use strict";s.h=!0;var h=t("./wood.js"),a=t("./cheapSeed"),o={9:[[5,5]],13:[[4,4],[10,4],[4,10],[10,10]],19:[[4,4],[10,4],[16,4],[4,10],[10,10],[16,10],[4,16],[10,16],[16,16]]},e=5,r=/[.,:;|`'!]/g,n=[[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],[.1,.12,.11,.1,.09,.09,.09,.09],[.12,.14,.13,.12,.12,.12]],f=function(){function t(t){this.i=Math.max(1,t.pixelRatio||1),this.j=!!t.isSketch,this.k=!t.noCoords,this.l=!!t.simpleStones,this.m=(t.marginPx||e)*this.i,this.o=t.backgroundCanvas,this.p=t.background,this.q=t.patternSeed||Math.random(),this.s(t.widthPx,t.heightPx)}return t.prototype.changeLook=function(t){void 0!==t.isSketch&&(this.j=t.isSketch),void 0!==t.noCoords&&(this.k=!t.noCoords,this.t()),void 0!==t.simpleStones&&(this.l=t.simpleStones,this.j||this.u()),void 0===t.background&&void 0===t.patternSeed||(void 0!==t.background&&(this.p=t.background),void 0!==t.patternSeed&&(this.q=t.patternSeed),this.v())},t.prototype.s=function(t,i){t||(console.error("Invalid gobo widthPx: "+t),t=100);var s=t*this.i,h=(i||t)*this.i;return(s!==this.A||h!==this.B)&&(this.A=s,this.B=h,!0)},t.prototype.C=function(t){return this.D=t,this.t(),this.j||this.u(),this.v(),this.F(),this.G},t.prototype.H=function(t,i){this.s(t,i)&&(this.t(),this.j||this.u(),this.G.width=this.A,this.G.height=this.B)},t.prototype.I=function(){this.J(),this.K(),this.L(),this.M(),this.k&&this.N(),this.O()},t.prototype.P=function(){return this.G},t.prototype.F=function(){this.G=document.createElement("canvas"),this.G.width=this.A,this.G.height=this.B},t.prototype.J=function(){this.R=this.G.getContext("2d"),this.R.textAlign="center",this.R.textBaseline="middle"},t.prototype.S=function(t,i){var s=document.createElement("canvas");return s.width=t,s.height=i,this.R=s.getContext("2d"),s},t.prototype.t=function(){var t=Math.min(this.A,this.B);this.T=this.D.T,this.k?(this.U=(t-2*this.m)/(this.T+2),this.U>10*this.i?(this.V=10*this.i,this.U=(t-2*this.m-2*this.V)/this.T):this.V=this.U,this.W=this.m+this.V):(this.U=(t-2*this.m)/this.T,this.W=this.m),this.X=this.U/2,this.Y=.55*this.U,this.Z=.8*this.U,this.$=Math.round(this.W+this.U/2+(this.A-t)/2),this._=Math.round(this.W+this.U/2+(this.B-t)/2),this.aa=this._+(this.T-1)*this.U,this.ba=this.$+(this.T-1)*this.U},t.prototype.ca=function(t,i){return[Math.round((t-this.$)/this.U),Math.round((this.aa-i)/this.U)]},t.prototype.v=function(){if(this.o)this.da=this.o;else if(this.p){if("#"===this.p[0]||"rgb"===this.p.substr(0,3).toLowerCase())this.ea=this.p,this.da=null;else if("wood"===this.p){if(this.j)return;var t=this.da=document.createElement("canvas");t.width=t.height=200*this.i,h.fa(t,this.q,this.q,this.i)}}else this.ea="#c75",this.da=null},t.prototype.u=function(){a.ga(this.q);var t=this.U,i=t/2;if(this.ha=this.S(t,t),this.ia(i,i),this.ja=[],this.ka=[],this.l)this.ja.push(this.S(t,t)),this.la(i,i,this.X),this.ka.push(this.S(t,t)),this.ma(i,i,this.X);else{for(var s=10;s>=0;s--)this.ja.push(this.S(t,t)),this.la(i,i,this.X);for(var s=17;s>=0;s--)this.ka.push(this.S(t,t)),this.ma(i,i,this.X);this.na=[];for(var h=0;h<this.T;h++)for(var o=this.na[h]=[],s=0;s<this.T;s++)o.push(~~(11*a.oa()));this.pa=[];for(var h=0;h<this.T;h++)for(var o=this.pa[h]=[],s=0;s<this.T;s++){var e=s%3+h%3*3,r=s%6<3==h%6<3?0:1,n=e+9*r;o.push(n)}}this.qa=this.S(t,t),this.ma(i,i,this.X/2),this.ra=this.S(t,t),this.la(i,i,this.X/2)},t.prototype.sa=function(){this.da?this.R.fillStyle=this.R.createPattern(this.da,"repeat"):this.R.fillStyle=this.ea},t.prototype.K=function(){this.sa(),this.R.fillRect(0,0,this.A,this.B)},t.prototype.L=function(){this.R.strokeStyle="#000",this.R.lineWidth=1,this.R.beginPath();for(var t=0;t<this.T;t++){var i=this.$+t*this.U;this.R.moveTo(i,this._),this.R.lineTo(i,this.aa);var s=this._+t*this.U;this.R.moveTo(this.$,s),this.R.lineTo(this.ba,s)}this.R.stroke()},t.prototype.M=function(){this.R.fillStyle="#000";var t=o[this.T];if(t)for(var i=0;i<t.length;i++){var s=t[i],h=(s[0]-1)*this.U+this.$,a=(s[1]-1)*this.U+this._;this.R.beginPath(),this.R.arc(h,a,this.U/9,0,2*Math.PI),this.R.fill()}},t.prototype.N=function(){this.R.fillStyle="#000",this.R.font=this.V+"px Arial";for(var t="ABCDEFGHJKLMNOPQRSTUVWXYZ",i=this.X+this.W/2,s=this.$,h=this._-i,a=this.aa+i,o=0;o<this.T;o++)this.R.fillText(t[o],s,h),this.R.fillText(t[o],s,a),s+=this.U;for(var e=this.$-i,r=this.ba+i,n=this._,o=0;o<this.T;o++){var f=(this.T-o).toString();this.R.fillText(f,e,n),this.R.fillText(f,r,n),n+=this.U}},t.prototype.O=function(){for(var t=this.j?1:2,i=0;i<t;i++)for(var s=0;s<this.T;s++)for(var h=0;h<this.T;h++)this.ta(h,s,i)},t.prototype.ta=function(t,i,s){var h=t*this.U+this.$,a=this.aa-i*this.U,o=this.D.ua(t,i);-1!==o.va&&(0!==s||this.j?this.xa(h,a,o.va,t,i):this.wa(h,a)),(-1===o.va||1===s||this.j)&&(o.mark&&this.ya(h,a,o),o.label&&this.za(h,a,o,o.label))},t.prototype.wa=function(t,i){var s=.25*this.X,h=this.X-s;this.R.drawImage(this.ha,t-h,i-h)},t.prototype.xa=function(t,i,s,h,a){if(this.j)return this.Aa(t,i,s,this.X);var o,e;0===s?(o=this.ja,e=this.l?0:this.na[a][h]):(o=this.ka,e=this.l?0:this.pa[a][h]);var r=o[e];this.R.drawImage(r,t-this.X,i-this.X)},t.prototype.Aa=function(t,i,s,h){this.R.fillStyle=0===s?"rgb(0,0,0)":"rgb(255,255,255)",this.R.beginPath(),this.R.arc(t,i,.93*h,0,2*Math.PI),this.R.fill()},t.prototype.Ba=function(t,i,s,h){if(this.j||-1!==h){var a=.4*this.X;return this.Aa(t,i,s,a)}var a=this.X,o=0===s?this.ra:this.qa;this.R.drawImage(o,t-a,i-a,2*a,2*a)},t.prototype.ia=function(t,i){var s=.1*this.X,h=.95*this.X,a=this.R.createRadialGradient(t,i,h-1-s,t,i,h+s);a.addColorStop(0,"rgba(32,32,32,0.5)"),a.addColorStop(1,"rgba(62,62,62,0)"),this.R.fillStyle=a,this.R.beginPath(),this.R.arc(t,i,h+s,0,2*Math.PI,!0),this.R.fill()},t.prototype.Ca=function(t,i,s,h,a,o,e){var r=s/5,n=this.R.createRadialGradient(t-2*r,i-2*r,o*s,t-r,i-r,e*s);n.addColorStop(0,h),n.addColorStop(1,a),this.R.beginPath(),this.R.fillStyle=n,this.R.arc(t,i,.95*s,0,2*Math.PI,!0),this.R.fill()},t.prototype.la=function(t,i,s){if(this.l)this.Ca(t,i,s,"#666","#000",.01,.75);else{var h=.8-.2*a.oa(),o=40*a.oa()+76,e="rgb("+~~(10*a.oa()+o)+","+~~(10*a.oa()+o)+","+~~(10*a.oa()+o)+")";this.Ca(t,i,s,e,"#000",.01,h)}},t.prototype.ma=function(t,i,s){if(this.Ca(t,i,s,"#fff","#aaa",.33,1),!this.l){var h=n[~~(3*a.oa())],o=2*a.oa()*Math.PI,e=(1+1.5*a.oa())*this.i,r=.2+.3*a.oa();this.Da(t,i,s,o,h,r,e)}},t.prototype.Da=function(t,i,s,h,o,e,r){for(var n=h,f=h,l=0;l<o.length;l++){n+=o[l],f-=o[l];var u=.15*a.oa()+0;this.Ea(t,i,s,n,f,e,r,u)}},t.prototype.Ea=function(t,i,s,h,a,o,e,r){var n=this.R;r=~~(100*r)/100,n.strokeStyle="rgba(128,128,128,"+r+")",n.lineWidth=s/30*e,n.beginPath(),s-=Math.max(1,n.lineWidth);var f,l,u,p,c=t+s*Math.cos(h*Math.PI),v=i+s*Math.sin(h*Math.PI),d=t+s*Math.cos(a*Math.PI),y=i+s*Math.sin(a*Math.PI);d>c?(f=(y-v)/(d-c),l=Math.atan(f)):d===c?l=Math.PI/2:(f=(y-v)/(d-c),l=Math.atan(f)-Math.PI);var R=o*s;u=Math.sin(l)*R,p=Math.cos(l)*R;var g=c+u,S=v-p,m=d+u,b=y-p;n.moveTo(c,v),n.bezierCurveTo(g,S,m,b,d,y),n.stroke()},t.prototype.Fa=function(t,i,s){switch(s.va){case-1:if("+"!==s.mark[0]){this.sa();var h=.8*this.U;this.R.fillRect(t-h/2,i-h/2,h,h)}return"#000";case 0:return"#fff";case 1:return"#000"}},t.prototype.ya=function(t,i,s){var h=this.R,a=s.mark.split(":"),o=a[0],e=a.length>1?a[1].split(","):[],r=(parseInt(e[0])/10||1)*this.Y,n=r/2,f=(parseInt(e[1])||5)*r/24;switch(o){case"[]":h.strokeStyle=this.Fa(t,i,s),h.lineWidth=f,h.strokeRect(t-n,i-n,r,r);break;case"O":h.strokeStyle=this.Fa(t,i,s),h.lineWidth=f,h.beginPath(),h.arc(t,i,n,0,2*Math.PI),h.stroke();break;case"*":h.fillStyle=this.Fa(t,i,s),h.font=1.5*this.Z+"px Arial",h.fillText("*",t,i+.42*this.Z);break;case"X":h.strokeStyle=this.Fa(t,i,s),h.lineWidth=f,this.Ga(t,i,n);break;case"+":h.strokeStyle=this.Fa(t,i,s),h.lineWidth=f,this.Ha(t,i,n);break;case"V":case"A":h.strokeStyle=this.Fa(t,i,s),h.lineWidth=f,this.Ia(t,i,n,"V"===o?1:-1);break;case"+?":h.fillStyle="#888",h.fillRect(t-n,i-n,r,r);break;case"+Bo":case"+Wo":this.Ba(t,i,"B"===o[1]?0:1,s.va);break;default:console.error("Unknown mark type: "+s.mark)}},t.prototype.Ga=function(t,i,s){var h=this.R;h.beginPath(),h.moveTo(t-s,i-s),h.lineTo(t+s,i+s),h.moveTo(t+s,i-s),h.lineTo(t-s,i+s),h.stroke()},t.prototype.Ha=function(t,i,s){var h=this.R;h.beginPath(),h.moveTo(t-s,i),h.lineTo(t+s,i),h.moveTo(t,i-s),h.lineTo(t,i+s),h.stroke()},t.prototype.Ia=function(t,i,s,h){var a=1.04*s,o=.6*s*h,e=this.R;e.beginPath(),e.moveTo(t,i+s*h),e.lineTo(t-a,i-o),e.lineTo(t+a,i-o),e.lineTo(t,i+s*h),e.lineTo(t-a,i-o),e.stroke()},t.prototype.za=function(t,i,s,h){this.R.fillStyle=this.Fa(t,i,s),s.style&&(this.R.fillStyle=s.style);var a=h.replace(r,"").length,o=h.length-a,e=a+.5*o,n=1.2-.2*e,f=Math.max(this.Z*n,12*this.i);this.R.font=f+"px Arial";var l=.05*f;this.R.fillText(h,t,i+l)},t}();s.Ja=f},{"./cheapSeed":5,"./wood.js":6}],2:[function(t,i,s){"use strict";s.h=!0;var h=t("./LogicalBoard"),a=t("./BoardRenderer"),o=function(){function t(t){this.Ka=new h.La(t.gobanSize||19),this.Ma=new a.Ja(t),this.canvas=this.Ma.C(this.Ka)}return t.prototype.changeLook=function(t){this.Ma.changeLook(t)},t.prototype.resize=function(t,i){this.Ma.H(t,i)},t.prototype.render=function(){this.Ma.I()},t.prototype.setStoneAt=function(t,i,s){this.Ka.Na(t,i,s)},t.prototype.clearVertexAt=function(t,i){this.Ka.Oa(t,i)},t.prototype.getStoneColorAt=function(t,i){return this.Ka.ua(t,i).va},t.prototype.setLabelAt=function(t,i,s,h){this.Ka.Pa(t,i,s,h)},t.prototype.getLabelAt=function(t,i){return this.Ka.ua(t,i).label},t.prototype.getStyleAt=function(t,i){return this.Ka.ua(t,i).style},t.prototype.setMarkAt=function(t,i,s){this.Ka.Qa(t,i,s)},t.prototype.getMarkAt=function(t,i){return this.Ka.ua(t,i).mark},t.prototype.pixelToGridCoordinates=function(t,i){return this.Ma.ca(t,i)},t}();s.Gobo=o},{"./BoardRenderer":1,"./LogicalBoard":3}],3:[function(t,i,s){"use strict";s.h=!0;var h=t("./Vertex"),a=function(){function t(t){this.T=t,this.Ra=new Array(t);for(var i=0;i<t;i++){this.Ra[i]=new Array(t);for(var s=0;s<t;s++)this.Ra[i][s]=new h.Sa}}return t.prototype.ua=function(t,i){var s=this.Ra[i][t];if(!s)throw new Error("Invalid coordinates: "+t+","+i);return s},t.prototype.Oa=function(t,i){this.ua(t,i).Oa()},t.prototype.Na=function(t,i,s){this.ua(t,i).Na(s)},t.prototype.Pa=function(t,i,s,h){var a=this.ua(t,i);a.Pa(s),h&&a.Ta(h)},t.prototype.Qa=function(t,i,s){this.ua(t,i).Qa(s)},t}();s.La=a},{"./Vertex":4}],4:[function(t,i,s){"use strict";s.h=!0;var h=function(){function t(){this.Oa()}return t.prototype.Oa=function(){this.va=-1,this.label="",this.mark=""},t.prototype.Na=function(t){this.va=t},t.prototype.Pa=function(t){this.label=t},t.prototype.Qa=function(t){this.mark=t},t.prototype.Ta=function(t){this.style=t},t}();s.Sa=h},{}],5:[function(t,i,s){"use strict";var h;s.ga=function(t){if(!(t>=0&&t<=1))throw new Error("Seed must be between 0 and 1");h=t},s.oa=function(){var t=43046721*h+.236067977;return h=t-Math.floor(t)},s.Ua=function(t,i){return s.oa()*(i-t)+t}},{}],6:[function(t,i,s){function h(){var t=[];t[d]=1;var i=t[y]=v(k[0],k[1]);return t[R]=v(i*M[0],i*M[1]),t}function a(t){for(var i=[0,0,0],s=v(T[0],T[1]),h=0;h<3;h++)i[h]=t[h]*s;return i}function o(t,i){for(var s=~~(t/f),h=t,a=[],o=s;o>=2;o--){var e=(c()+.5)*(h/o);a.push(e),h-=e,i.push(0)}return a.push(h),a}function e(t,i,s,h,a,o){for(var e=h,r=i.length,n=Math.max((o-a)/b+1,0),u=0;u<r-1;u++){var p=(u+.5)*f,v=h-e+i[u]/2,d=Math.max((v-h)/m+1,0),y=Math.min(Math.abs(v-p)/l,1),R=s[u];R=R*(1-y)+(c()-.5)*S,s[u]=R=Math.max(Math.min(R,g),-g);var k=i[u]+R;k=e/(r-u)*d+k*(1-d);var M=t[u]*n+k*(1-n);i[u]=M,e-=M}i[r-1]=e}function r(t){for(var i=h(),s=a(i),o=v(x[0],x[1]),e=[0,0,0],r=[],n=t-1;n>=0;n--){for(var f=n%2?1-c()*o:0+c()*o,l=0;l<3;l++)e[l]=f*i[l]+(1-f)*s[l];for(var u="#",l=0;l<3;l++)u+=("0"+Math.round(255*e[l]).toString(16)).slice(-2);r[n]=u}return r}function n(t,i,s,h){p(s),f=v(1.2,2.4)*h,l=v(1,2.5)*f;var a=[],n=o(t.width,a),u=n.length;p(i);var c=r(u);p(s);for(var d=n.concat(),y=t.getContext("2d"),R=0;R<t.height;R++){for(var g=0,S=0;S<u;S++){y.fillStyle=c[S];var m=d[S];y.fillRect(g,R,m+1,1),g+=m}e(n,d,a,t.width,t.height,R)}}var f,l,u=t("./cheapSeed"),p=u.ga,c=u.oa,v=u.Ua,d=0,y=1,R=2,g=.12,S=g/8,m=30,b=100,k=[.4,.85],M=[.6,.9],T=[.75,.9],x=[.2,.5];s.fa=function(t,i,s,h){n(t,i,s,h)}},{"./cheapSeed":5}]},{},[2])(2)});