!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.g)define([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.gobo=t()}}(function(){return function t(i,h,s){function a(r,o){if(!h[r]){if(!i[r]){var n="function"==typeof require&&require;if(!o&&n)return n(r,!0);if(e)return e(r,!0);var f=new Error("Cannot find module '"+r+"'");throw f.code="MODULE_NOT_FOUND",f}var l=h[r]={exports:{}};i[r][0].call(l.exports,function(t){var h=i[r][1][t];return a(h||t)},l,l.exports,t,i,h,s)}return h[r].exports}for(var e="function"==typeof require&&require,r=0;r<s.length;r++)a(s[r]);return a}({1:[function(t,i,h){"use strict";h.h=!0;var s=t("./wood.js"),a=t("./cheapSeed"),e={9:[[5,5]],13:[[4,4],[10,4],[4,10],[10,10]],19:[[4,4],[10,4],[16,4],[4,10],[10,10],[16,10],[4,16],[10,16],[16,16]]},r=5,o=/[.,:;|`'!]/g,n=[[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],[.1,.12,.11,.1,.09,.09,.09,.09],[.12,.14,.13,.12,.12,.12]],f=function(){function t(t){this.i=Math.max(1,t.pixelRatio||1),this.j=!!t.isSketch,this.k=!t.noCoords,this.l=(t.marginPx||r)*this.i,this.m=t.backgroundCanvas,this.o=t.background,this.p=t.patternSeed||Math.random(),this.q(t.widthPx,t.heightPx)}return t.prototype.q=function(t,i){t||(console.error("Invalid gobo widthPx: "+t),t=100);var h=t*this.i,s=(i||t)*this.i;return(h!==this.s||s!==this.t)&&(this.s=h,this.t=s,!0)},t.prototype.u=function(t){return this.v=t,this.A(),this.j||this.B(),this.C(),this.D(),this.F},t.prototype.G=function(t,i){this.q(t,i)&&(this.A(),this.j||this.B(),this.F.width=this.s,this.F.height=this.t)},t.prototype.H=function(){this.I(),this.J(),this.K(),this.L(),this.k&&this.M(),this.N()},t.prototype.O=function(){return this.F},t.prototype.D=function(){this.F=document.createElement("canvas"),this.F.width=this.s,this.F.height=this.t},t.prototype.I=function(){this.P=this.F.getContext("2d"),this.P.textAlign="center",this.P.textBaseline="middle"},t.prototype.R=function(t,i){var h=document.createElement("canvas");return h.width=t,h.height=i,this.P=h.getContext("2d"),h},t.prototype.A=function(){var t=Math.min(this.s,this.t);this.S=this.v.S,this.k?(this.T=(t-2*this.l)/(this.S+2),this.T>10*this.i?(this.U=10*this.i,this.T=(t-2*this.l-2*this.U)/this.S):this.U=this.T,this.V=this.l+this.U):(this.T=(t-2*this.l)/this.S,this.V=this.l),this.W=this.T/2,this.X=.55*this.T,this.Y=.8*this.T,this.Z=Math.round(this.V+this.T/2+(this.s-t)/2),this.$=Math.round(this.V+this.T/2+(this.t-t)/2),this._=this.$+(this.S-1)*this.T,this.aa=this.Z+(this.S-1)*this.T},t.prototype.ba=function(t,i){return[Math.round((t-this.Z)/this.T),Math.round((this._-i)/this.T)]},t.prototype.C=function(){if(!this.m)if(this.o){if("#"===this.o[0]||"rgb"===this.o.substr(0,3).toLowerCase())this.ca=this.o;else if("wood"===this.o){if(this.j||this.m)return;var t=this.m=document.createElement("canvas");t.width=t.height=200*this.i,s.da(t,this.p,this.p,this.i)}}else this.ca="#c75"},t.prototype.B=function(){a.ea(this.p);var t=this.T,i=t/2;this.fa=this.R(t,t),this.ga(i,i),this.ha=[];for(var h=10;h>=0;h--)this.ha.push(this.R(t,t)),this.ia(i,i,this.W);this.ja=[];for(var h=17;h>=0;h--)this.ja.push(this.R(t,t)),this.ka(i,i,this.W);this.la=[];for(var s=0;s<this.S;s++)for(var e=this.la[s]=[],h=0;h<this.S;h++)e.push(~~(11*a.ma()));this.na=[];for(var s=0;s<this.S;s++)for(var e=this.na[s]=[],h=0;h<this.S;h++){var r=h%3+s%3*3,o=h%6<3==s%6<3?0:1,n=r+9*o;e.push(n)}this.oa=this.R(t,t),this.ka(i,i,this.W/2),this.pa=this.R(t,t),this.ia(i,i,this.W/2)},t.prototype.qa=function(){this.m?this.P.fillStyle=this.P.createPattern(this.m,"repeat"):this.P.fillStyle=this.ca},t.prototype.J=function(){this.qa(),this.P.fillRect(0,0,this.s,this.t)},t.prototype.K=function(){this.P.strokeStyle="#000",this.P.lineWidth=1,this.P.beginPath();for(var t=0;t<this.S;t++){var i=this.Z+t*this.T;this.P.moveTo(i,this.$),this.P.lineTo(i,this._);var h=this.$+t*this.T;this.P.moveTo(this.Z,h),this.P.lineTo(this.aa,h)}this.P.stroke()},t.prototype.L=function(){this.P.fillStyle="#000";var t=e[this.S];if(t)for(var i=0;i<t.length;i++){var h=t[i],s=(h[0]-1)*this.T+this.Z,a=(h[1]-1)*this.T+this.$;this.P.beginPath(),this.P.arc(s,a,this.T/9,0,2*Math.PI),this.P.fill()}},t.prototype.M=function(){this.P.fillStyle="#000",this.P.font=this.U+"px Arial";for(var t="ABCDEFGHJKLMNOPQRSTUVWXYZ",i=this.W+this.V/2,h=this.Z,s=this.$-i,a=this._+i,e=0;e<this.S;e++)this.P.fillText(t[e],h,s),this.P.fillText(t[e],h,a),h+=this.T;for(var r=this.Z-i,o=this.aa+i,n=this.$,e=0;e<this.S;e++){var f=(this.S-e).toString();this.P.fillText(f,r,n),this.P.fillText(f,o,n),n+=this.T}},t.prototype.N=function(){for(var t=this.j?1:2,i=0;i<t;i++)for(var h=0;h<this.S;h++)for(var s=0;s<this.S;s++)this.ra(s,h,i)},t.prototype.ra=function(t,i,h){var s=t*this.T+this.Z,a=this._-i*this.T,e=this.v.sa(t,i);-1!==e.ta&&(0!==h||this.j?this.va(s,a,e.ta,t,i):this.ua(s,a)),(-1===e.ta||1===h||this.j)&&(e.mark&&this.wa(s,a,e),e.label&&this.xa(s,a,e,e.label))},t.prototype.ua=function(t,i){var h=.25*this.W,s=this.W-h;this.P.drawImage(this.fa,t-s,i-s)},t.prototype.va=function(t,i,h,s,a){if(this.j)return this.ya(t,i,h,this.W);var e;e=0===h?this.ha[this.la[a][s]]:this.ja[this.na[a][s]],this.P.drawImage(e,t-this.W,i-this.W)},t.prototype.ya=function(t,i,h,s){this.P.fillStyle=0===h?"rgb(0,0,0)":"rgb(255,255,255)",this.P.beginPath(),this.P.arc(t,i,.93*s,0,2*Math.PI),this.P.fill()},t.prototype.za=function(t,i,h,s){if(this.j||-1!==s){var a=.4*this.W;return this.ya(t,i,h,a)}var a=this.W,e=0===h?this.pa:this.oa;this.P.drawImage(e,t-a,i-a,2*a,2*a)},t.prototype.ga=function(t,i){var h=.1*this.W,s=.95*this.W,a=this.P.createRadialGradient(t,i,s-1-h,t,i,s+h);a.addColorStop(0,"rgba(32,32,32,0.5)"),a.addColorStop(1,"rgba(62,62,62,0)"),this.P.fillStyle=a,this.P.beginPath(),this.P.arc(t,i,s+h,0,2*Math.PI,!0),this.P.fill()},t.prototype.Aa=function(t,i,h,s,a,e,r){var o=h/5,n=this.P.createRadialGradient(t-2*o,i-2*o,e*h,t-o,i-o,r*h);n.addColorStop(0,s),n.addColorStop(1,a),this.P.beginPath(),this.P.fillStyle=n,this.P.arc(t,i,.95*h,0,2*Math.PI,!0),this.P.fill()},t.prototype.ia=function(t,i,h){var s=.8-.2*a.ma(),e=40*a.ma()+76,r="rgb("+~~(10*a.ma()+e)+","+~~(10*a.ma()+e)+","+~~(10*a.ma()+e)+")";this.Aa(t,i,h,r,"#000",.01,s)},t.prototype.ka=function(t,i,h){this.Aa(t,i,h,"#fff","#aaa",.33,1);var s=n[~~(3*a.ma())],e=2*a.ma()*Math.PI,r=(1+1.5*a.ma())*this.i,o=.2+.3*a.ma();this.Ba(t,i,h,e,s,o,r)},t.prototype.Ba=function(t,i,h,s,e,r,o){for(var n=s,f=s,l=0;l<e.length;l++){n+=e[l],f-=e[l];var u=.15*a.ma()+0;this.Ca(t,i,h,n,f,r,o,u)}},t.prototype.Ca=function(t,i,h,s,a,e,r,o){var n=this.P;o=~~(100*o)/100,n.strokeStyle="rgba(128,128,128,"+o+")",n.lineWidth=h/30*r,n.beginPath(),h-=Math.max(1,n.lineWidth);var f,l,u,c,p=t+h*Math.cos(s*Math.PI),v=i+h*Math.sin(s*Math.PI),d=t+h*Math.cos(a*Math.PI),y=i+h*Math.sin(a*Math.PI);d>p?(f=(y-v)/(d-p),l=Math.atan(f)):d===p?l=Math.PI/2:(f=(y-v)/(d-p),l=Math.atan(f)-Math.PI);var P=e*h;u=Math.sin(l)*P,c=Math.cos(l)*P;var m=p+u,g=v-c,S=d+u,M=y-c;n.moveTo(p,v),n.bezierCurveTo(m,g,S,M,d,y),n.stroke()},t.prototype.Da=function(t,i,h){switch(h.ta){case-1:if("+"!==h.mark[0]){this.qa();var s=.8*this.T;this.P.fillRect(t-s/2,i-s/2,s,s)}return"#000";case 0:return"#fff";case 1:return"#000"}},t.prototype.wa=function(t,i,h){var s=this.P,a=h.mark.split(":"),e=a[0],r=a.length>1?a[1].split(","):[],o=(parseInt(r[0])/10||1)*this.X,n=o/2,f=(parseInt(r[1])||5)*o/24;switch(e){case"[]":s.strokeStyle=this.Da(t,i,h),s.lineWidth=f,s.strokeRect(t-n,i-n,o,o);break;case"O":s.strokeStyle=this.Da(t,i,h),s.lineWidth=f,s.beginPath(),s.arc(t,i,n,0,2*Math.PI),s.stroke();break;case"*":s.fillStyle=this.Da(t,i,h),s.font=1.5*this.Y+"px Arial",s.fillText("*",t,i+.35*this.Y);break;case"+":s.strokeStyle=this.Da(t,i,h),s.lineWidth=f,s.beginPath(),s.moveTo(t-n,i),s.lineTo(t+n,i),s.moveTo(t,i-n),s.lineTo(t,i+n),s.stroke();break;case"+?":s.fillStyle="#888",s.fillRect(t-n,i-n,o,o);break;case"+Bo":case"+Wo":this.za(t,i,"B"===e[1]?0:1,h.ta);break;default:console.error("Unknown mark type: "+h.mark)}},t.prototype.xa=function(t,i,h,s){this.P.fillStyle=this.Da(t,i,h),h.style&&(this.P.fillStyle=h.style);var a=s.replace(o,"").length,e=s.length-a,r=a+.5*e,n=1.2-.2*r,f=Math.max(this.Y*n,12*this.i);this.P.font=f+"px Arial",this.P.fillText(s,t,i)},t}();h.Ea=f},{"./cheapSeed":5,"./wood.js":6}],2:[function(t,i,h){"use strict";h.h=!0;var s=t("./LogicalBoard"),a=t("./BoardRenderer"),e=function(){function t(t){this.Fa=new s.Ga(t.gobanSize||19),this.Ha=new a.Ea(t),this.canvas=this.Ha.u(this.Fa)}return t.prototype.resize=function(t,i){this.Ha.G(t,i)},t.prototype.render=function(){this.Ha.H()},t.prototype.setStoneAt=function(t,i,h){this.Fa.Ia(t,i,h)},t.prototype.clearVertexAt=function(t,i){this.Fa.Ja(t,i)},t.prototype.getStoneColorAt=function(t,i){return this.Fa.sa(t,i).ta},t.prototype.setLabelAt=function(t,i,h,s){this.Fa.Ka(t,i,h,s)},t.prototype.setMarkAt=function(t,i,h){this.Fa.La(t,i,h)},t.prototype.pixelToGridCoordinates=function(t,i){return this.Ha.ba(t,i)},t}();h.Gobo=e},{"./BoardRenderer":1,"./LogicalBoard":3}],3:[function(t,i,h){"use strict";h.h=!0;var s=t("./Vertex"),a=function(){function t(t){this.S=t,this.Ma=new Array(t);for(var i=0;i<t;i++){this.Ma[i]=new Array(t);for(var h=0;h<t;h++)this.Ma[i][h]=new s.Na}}return t.prototype.sa=function(t,i){var h=this.Ma[i][t];if(!h)throw new Error("Invalid coordinates: "+t+","+i);return h},t.prototype.Ja=function(t,i){this.sa(t,i).Ja()},t.prototype.Ia=function(t,i,h){this.sa(t,i).Ia(h)},t.prototype.Ka=function(t,i,h,s){var a=this.sa(t,i);a.Ka(h),s&&a.Oa(s)},t.prototype.La=function(t,i,h){this.sa(t,i).La(h)},t}();h.Ga=a},{"./Vertex":4}],4:[function(t,i,h){"use strict";h.h=!0;var s=function(){function t(){this.Ja()}return t.prototype.Ja=function(){this.ta=-1,this.label="",this.mark=""},t.prototype.Ia=function(t){this.ta=t},t.prototype.Ka=function(t){this.label=t},t.prototype.La=function(t){this.mark=t},t.prototype.Oa=function(t){this.style=t},t}();h.Na=s},{}],5:[function(t,i,h){"use strict";var s;h.ea=function(t){if(!(t>=0&&t<=1))throw new Error("Seed must be between 0 and 1");s=t},h.ma=function(){var t=43046721*s+.236067977;return s=t-Math.floor(t)},h.Pa=function(t,i){return h.ma()*(i-t)+t}},{}],6:[function(t,i,h){function s(){var t=[];t[d]=1;var i=t[y]=v(T[0],T[1]);return t[P]=v(i*b[0],i*b[1]),t}function a(t){for(var i=[0,0,0],h=v(x[0],x[1]),s=0;s<3;s++)i[s]=t[s]*h;return i}function e(t,i){for(var h=~~(t/f),s=t,a=[],e=h;e>=2;e--){var r=(p()+.5)*(s/e);a.push(r),s-=r,i.push(0)}return a.push(s),a}function r(t,i,h,s,a,e){for(var r=s,o=i.length,n=Math.max((e-a)/M+1,0),u=0;u<o-1;u++){var c=(u+.5)*f,v=s-r+i[u]/2,d=Math.max((v-s)/S+1,0),y=Math.min(Math.abs(v-c)/l,1),P=h[u];P=P*(1-y)+(p()-.5)*g,h[u]=P=Math.max(Math.min(P,m),-m);var T=i[u]+P;T=r/(o-u)*d+T*(1-d);var b=t[u]*n+T*(1-n);i[u]=b,r-=b}i[o-1]=r}function o(t){for(var i=s(),h=a(i),e=v(w[0],w[1]),r=[0,0,0],o=[],n=t-1;n>=0;n--){for(var f=n%2?1-p()*e:0+p()*e,l=0;l<3;l++)r[l]=f*i[l]+(1-f)*h[l];for(var u="#",l=0;l<3;l++)u+=("0"+Math.round(255*r[l]).toString(16)).slice(-2);o[n]=u}return o}function n(t,i,h,s){c(h),f=v(1.2,2.4)*s,l=v(1,2.5)*f;var a=[],n=e(t.width,a),u=n.length;c(i);var p=o(u);c(h);for(var d=n.concat(),y=t.getContext("2d"),P=0;P<t.height;P++){for(var m=0,g=0;g<u;g++){y.fillStyle=p[g];var S=d[g];y.fillRect(m,P,S+1,1),m+=S}r(n,d,a,t.width,t.height,P)}}var f,l,u=t("./cheapSeed"),c=u.ea,p=u.ma,v=u.Pa,d=0,y=1,P=2,m=.12,g=m/8,S=30,M=100,T=[.4,.85],b=[.6,.9],x=[.75,.9],w=[.2,.5];h.da=function(t,i,h,s){n(t,i,h,s)}},{"./cheapSeed":5}]},{},[2])(2)});