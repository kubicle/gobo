!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.g)define([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.gobo=t()}}(function(){return function t(i,h,s){function a(e,r){if(!h[e]){if(!i[e]){var n="function"==typeof require&&require;if(!r&&n)return n(e,!0);if(o)return o(e,!0);var f=new Error("Cannot find module '"+e+"'");throw f.code="MODULE_NOT_FOUND",f}var u=h[e]={exports:{}};i[e][0].call(u.exports,function(t){var h=i[e][1][t];return a(h||t)},u,u.exports,t,i,h,s)}return h[e].exports}for(var o="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(t,i,h){"use strict";h.h=!0;var s=t("./wood.js"),a=t("./cheapSeed"),o={9:[[5,5]],13:[[4,4],[10,4],[4,10],[10,10]],19:[[4,4],[10,4],[16,4],[4,10],[10,10],[16,10],[4,16],[10,16],[16,16]]},e=5,r=/[.,:;|`'!]/g,n=[[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],[.1,.12,.11,.1,.09,.09,.09,.09],[.12,.14,.13,.12,.12,.12]],f=function(){function t(t){this.i=Math.max(1,t.pixelRatio||1),this.j=!!t.isSketch,this.k=!t.noCoords,this.l=!!t.simpleStones,this.m=(t.marginPx||e)*this.i,this.o=t.backgroundCanvas,this.p=t.background,this.q=t.patternSeed||Math.random(),this.s(t.widthPx,t.heightPx)}return t.prototype.changeLook=function(t){void 0!==t.isSketch&&(this.j=t.isSketch),void 0!==t.noCoords&&(this.k=!t.noCoords,this.t()),void 0!==t.simpleStones&&(this.l=t.simpleStones,this.j||this.u()),void 0===t.background&&void 0===t.patternSeed||(void 0!==t.background&&(this.p=t.background),void 0!==t.patternSeed&&(this.q=t.patternSeed),this.v())},t.prototype.s=function(t,i){t||(console.error("Invalid gobo widthPx: "+t),t=100);var h=t*this.i,s=(i||t)*this.i;return(h!==this.A||s!==this.B)&&(this.A=h,this.B=s,!0)},t.prototype.C=function(t){return this.D=t,this.t(),this.j||this.u(),this.v(),this.F(),this.G},t.prototype.H=function(t,i){this.s(t,i)&&(this.t(),this.j||this.u(),this.G.width=this.A,this.G.height=this.B)},t.prototype.I=function(){this.J(),this.K(),this.L(),this.M(),this.k&&this.N(),this.O()},t.prototype.P=function(){return this.G},t.prototype.F=function(){this.G=document.createElement("canvas"),this.G.width=this.A,this.G.height=this.B},t.prototype.J=function(){this.R=this.G.getContext("2d"),this.R.textAlign="center",this.R.textBaseline="middle"},t.prototype.S=function(t,i){var h=document.createElement("canvas");return h.width=t,h.height=i,this.R=h.getContext("2d"),h},t.prototype.t=function(){var t=Math.min(this.A,this.B);this.T=this.D.T,this.k?(this.U=(t-2*this.m)/(this.T+2),this.U>10*this.i?(this.V=10*this.i,this.U=(t-2*this.m-2*this.V)/this.T):this.V=this.U,this.W=this.m+this.V):(this.U=(t-2*this.m)/this.T,this.W=this.m),this.X=this.U/2,this.Y=.55*this.U,this.Z=.8*this.U,this.$=Math.round(this.W+this.U/2+(this.A-t)/2),this._=Math.round(this.W+this.U/2+(this.B-t)/2),this.aa=this._+(this.T-1)*this.U,this.ba=this.$+(this.T-1)*this.U},t.prototype.ca=function(t,i){return[Math.round((t-this.$)/this.U),Math.round((this.aa-i)/this.U)]},t.prototype.v=function(){if(this.o)this.da=this.o;else if(this.p){if("#"===this.p[0]||"rgb"===this.p.substr(0,3).toLowerCase())this.ea=this.p,this.da=null;else if("wood"===this.p){if(this.j)return;var t=this.da=document.createElement("canvas");t.width=t.height=200*this.i,s.fa(t,this.q,this.q,this.i)}}else this.ea="#c75",this.da=null},t.prototype.u=function(){a.ga(this.q);var t=this.U,i=t/2;if(this.ha=this.S(t,t),this.ia(i,i),this.ja=[],this.ka=[],this.l)this.ja.push(this.S(t,t)),this.la(i,i,this.X),this.ka.push(this.S(t,t)),this.ma(i,i,this.X);else{for(var h=10;h>=0;h--)this.ja.push(this.S(t,t)),this.la(i,i,this.X);for(var h=17;h>=0;h--)this.ka.push(this.S(t,t)),this.ma(i,i,this.X);this.na=[];for(var s=0;s<this.T;s++)for(var o=this.na[s]=[],h=0;h<this.T;h++)o.push(~~(11*a.oa()));this.pa=[];for(var s=0;s<this.T;s++)for(var o=this.pa[s]=[],h=0;h<this.T;h++){var e=h%3+s%3*3,r=h%6<3==s%6<3?0:1,n=e+9*r;o.push(n)}}this.qa=this.S(t,t),this.ma(i,i,this.X/2),this.ra=this.S(t,t),this.la(i,i,this.X/2)},t.prototype.sa=function(){this.da?this.R.fillStyle=this.R.createPattern(this.da,"repeat"):this.R.fillStyle=this.ea},t.prototype.K=function(){this.sa(),this.R.fillRect(0,0,this.A,this.B)},t.prototype.L=function(){this.R.strokeStyle="#000",this.R.lineWidth=1,this.R.beginPath();for(var t=0;t<this.T;t++){var i=this.$+t*this.U;this.R.moveTo(i,this._),this.R.lineTo(i,this.aa);var h=this._+t*this.U;this.R.moveTo(this.$,h),this.R.lineTo(this.ba,h)}this.R.stroke()},t.prototype.M=function(){this.R.fillStyle="#000";var t=o[this.T];if(t)for(var i=0;i<t.length;i++){var h=t[i],s=(h[0]-1)*this.U+this.$,a=(h[1]-1)*this.U+this._;this.R.beginPath(),this.R.arc(s,a,this.U/9,0,2*Math.PI),this.R.fill()}},t.prototype.N=function(){this.R.fillStyle="#000",this.R.font=this.V+"px Arial";for(var t="ABCDEFGHJKLMNOPQRSTUVWXYZ",i=this.X+this.W/2,h=this.$,s=this._-i,a=this.aa+i,o=0;o<this.T;o++)this.R.fillText(t[o],h,s),this.R.fillText(t[o],h,a),h+=this.U;for(var e=this.$-i,r=this.ba+i,n=this._,o=0;o<this.T;o++){var f=(this.T-o).toString();this.R.fillText(f,e,n),this.R.fillText(f,r,n),n+=this.U}},t.prototype.O=function(){for(var t=this.j?1:2,i=0;i<t;i++)for(var h=0;h<this.T;h++)for(var s=0;s<this.T;s++)this.ta(s,h,i)},t.prototype.ta=function(t,i,h){var s=t*this.U+this.$,a=this.aa-i*this.U,o=this.D.ua(t,i);-1!==o.va&&(0!==h||this.j?this.xa(s,a,o.va,t,i):this.wa(s,a)),(-1===o.va||1===h||this.j)&&(o.mark&&this.ya(s,a,o),o.label&&this.za(s,a,o,o.label))},t.prototype.wa=function(t,i){var h=.25*this.X,s=this.X-h;this.R.drawImage(this.ha,t-s,i-s)},t.prototype.xa=function(t,i,h,s,a){if(this.j)return this.Aa(t,i,h,this.X);var o,e;0===h?(o=this.ja,e=this.l?0:this.na[a][s]):(o=this.ka,e=this.l?0:this.pa[a][s]);var r=o[e];this.R.drawImage(r,t-this.X,i-this.X)},t.prototype.Aa=function(t,i,h,s){this.R.fillStyle=0===h?"rgb(0,0,0)":"rgb(255,255,255)",this.R.beginPath(),this.R.arc(t,i,.93*s,0,2*Math.PI),this.R.fill()},t.prototype.Ba=function(t,i,h,s){if(this.j||-1!==s){var a=.4*this.X;return this.Aa(t,i,h,a)}var a=this.X,o=0===h?this.ra:this.qa;this.R.drawImage(o,t-a,i-a,2*a,2*a)},t.prototype.ia=function(t,i){var h=.1*this.X,s=.95*this.X,a=this.R.createRadialGradient(t,i,s-1-h,t,i,s+h);a.addColorStop(0,"rgba(32,32,32,0.5)"),a.addColorStop(1,"rgba(62,62,62,0)"),this.R.fillStyle=a,this.R.beginPath(),this.R.arc(t,i,s+h,0,2*Math.PI,!0),this.R.fill()},t.prototype.Ca=function(t,i,h,s,a,o,e){var r=h/5,n=this.R.createRadialGradient(t-2*r,i-2*r,o*h,t-r,i-r,e*h);n.addColorStop(0,s),n.addColorStop(1,a),this.R.beginPath(),this.R.fillStyle=n,this.R.arc(t,i,.95*h,0,2*Math.PI,!0),this.R.fill()},t.prototype.la=function(t,i,h){if(this.l)this.Ca(t,i,h,"#666","#000",.01,.75);else{var s=.8-.2*a.oa(),o=40*a.oa()+76,e="rgb("+~~(10*a.oa()+o)+","+~~(10*a.oa()+o)+","+~~(10*a.oa()+o)+")";this.Ca(t,i,h,e,"#000",.01,s)}},t.prototype.ma=function(t,i,h){if(this.Ca(t,i,h,"#fff","#aaa",.33,1),!this.l){var s=n[~~(3*a.oa())],o=2*a.oa()*Math.PI,e=(1+1.5*a.oa())*this.i,r=.2+.3*a.oa();this.Da(t,i,h,o,s,r,e)}},t.prototype.Da=function(t,i,h,s,o,e,r){for(var n=s,f=s,u=0;u<o.length;u++){n+=o[u],f-=o[u];var l=.15*a.oa()+0;this.Ea(t,i,h,n,f,e,r,l)}},t.prototype.Ea=function(t,i,h,s,a,o,e,r){var n=this.R;r=~~(100*r)/100,n.strokeStyle="rgba(128,128,128,"+r+")",n.lineWidth=h/30*e,n.beginPath(),h-=Math.max(1,n.lineWidth);var f,u,l,p,c=t+h*Math.cos(s*Math.PI),d=i+h*Math.sin(s*Math.PI),v=t+h*Math.cos(a*Math.PI),y=i+h*Math.sin(a*Math.PI);v>c?(f=(y-d)/(v-c),u=Math.atan(f)):v===c?u=Math.PI/2:(f=(y-d)/(v-c),u=Math.atan(f)-Math.PI);var R=o*h;l=Math.sin(u)*R,p=Math.cos(u)*R;var g=c+l,m=d-p,S=v+l,b=y-p;n.moveTo(c,d),n.bezierCurveTo(g,m,S,b,v,y),n.stroke()},t.prototype.Fa=function(t,i,h){switch(h.va){case-1:if("+"!==h.mark[0]){this.sa();var s=.8*this.U;this.R.fillRect(t-s/2,i-s/2,s,s)}return"#000";case 0:return"#fff";case 1:return"#000"}},t.prototype.ya=function(t,i,h){var s=this.R,a=h.mark.split(":"),o=a[0],e=a.length>1?a[1].split(","):[],r=(parseInt(e[0])/10||1)*this.Y,n=r/2,f=(parseInt(e[1])||5)*r/24;switch(o){case"[]":s.strokeStyle=this.Fa(t,i,h),s.lineWidth=f,s.strokeRect(t-n,i-n,r,r);break;case"O":s.strokeStyle=this.Fa(t,i,h),s.lineWidth=f,s.beginPath(),s.arc(t,i,n,0,2*Math.PI),s.stroke();break;case"*":s.fillStyle=this.Fa(t,i,h),s.font=1.5*this.Z+"px Arial",s.fillText("*",t,i+.35*this.Z);break;case"+":s.strokeStyle=this.Fa(t,i,h),s.lineWidth=f,s.beginPath(),s.moveTo(t-n,i),s.lineTo(t+n,i),s.moveTo(t,i-n),s.lineTo(t,i+n),s.stroke();break;case"+?":s.fillStyle="#888",s.fillRect(t-n,i-n,r,r);break;case"+Bo":case"+Wo":this.Ba(t,i,"B"===o[1]?0:1,h.va);break;default:console.error("Unknown mark type: "+h.mark)}},t.prototype.za=function(t,i,h,s){this.R.fillStyle=this.Fa(t,i,h),h.style&&(this.R.fillStyle=h.style);var a=s.replace(r,"").length,o=s.length-a,e=a+.5*o,n=1.2-.2*e,f=Math.max(this.Z*n,12*this.i);this.R.font=f+"px Arial",this.R.fillText(s,t,i)},t}();h.Ga=f},{"./cheapSeed":5,"./wood.js":6}],2:[function(t,i,h){"use strict";h.h=!0;var s=t("./LogicalBoard"),a=t("./BoardRenderer"),o=function(){function t(t){this.Ha=new s.Ia(t.gobanSize||19),this.Ja=new a.Ga(t),this.canvas=this.Ja.C(this.Ha)}return t.prototype.changeLook=function(t){this.Ja.changeLook(t)},t.prototype.resize=function(t,i){this.Ja.H(t,i)},t.prototype.render=function(){this.Ja.I()},t.prototype.setStoneAt=function(t,i,h){this.Ha.Ka(t,i,h)},t.prototype.clearVertexAt=function(t,i){this.Ha.La(t,i)},t.prototype.getStoneColorAt=function(t,i){return this.Ha.ua(t,i).va},t.prototype.setLabelAt=function(t,i,h,s){this.Ha.Ma(t,i,h,s)},t.prototype.setMarkAt=function(t,i,h){this.Ha.Na(t,i,h)},t.prototype.pixelToGridCoordinates=function(t,i){return this.Ja.ca(t,i)},t}();h.Gobo=o},{"./BoardRenderer":1,"./LogicalBoard":3}],3:[function(t,i,h){"use strict";h.h=!0;var s=t("./Vertex"),a=function(){function t(t){this.T=t,this.Oa=new Array(t);for(var i=0;i<t;i++){this.Oa[i]=new Array(t);for(var h=0;h<t;h++)this.Oa[i][h]=new s.Pa}}return t.prototype.ua=function(t,i){var h=this.Oa[i][t];if(!h)throw new Error("Invalid coordinates: "+t+","+i);return h},t.prototype.La=function(t,i){this.ua(t,i).La()},t.prototype.Ka=function(t,i,h){this.ua(t,i).Ka(h)},t.prototype.Ma=function(t,i,h,s){var a=this.ua(t,i);a.Ma(h),s&&a.Qa(s)},t.prototype.Na=function(t,i,h){this.ua(t,i).Na(h)},t}();h.Ia=a},{"./Vertex":4}],4:[function(t,i,h){"use strict";h.h=!0;var s=function(){function t(){this.La()}return t.prototype.La=function(){this.va=-1,this.label="",this.mark=""},t.prototype.Ka=function(t){this.va=t},t.prototype.Ma=function(t){this.label=t},t.prototype.Na=function(t){this.mark=t},t.prototype.Qa=function(t){this.style=t},t}();h.Pa=s},{}],5:[function(t,i,h){"use strict";var s;h.ga=function(t){if(!(t>=0&&t<=1))throw new Error("Seed must be between 0 and 1");s=t},h.oa=function(){var t=43046721*s+.236067977;return s=t-Math.floor(t)},h.Ra=function(t,i){return h.oa()*(i-t)+t}},{}],6:[function(t,i,h){function s(){var t=[];t[v]=1;var i=t[y]=d(M[0],M[1]);return t[R]=d(i*k[0],i*k[1]),t}function a(t){for(var i=[0,0,0],h=d(T[0],T[1]),s=0;s<3;s++)i[s]=t[s]*h;return i}function o(t,i){for(var h=~~(t/f),s=t,a=[],o=h;o>=2;o--){var e=(c()+.5)*(s/o);a.push(e),s-=e,i.push(0)}return a.push(s),a}function e(t,i,h,s,a,o){for(var e=s,r=i.length,n=Math.max((o-a)/b+1,0),l=0;l<r-1;l++){var p=(l+.5)*f,d=s-e+i[l]/2,v=Math.max((d-s)/S+1,0),y=Math.min(Math.abs(d-p)/u,1),R=h[l];R=R*(1-y)+(c()-.5)*m,h[l]=R=Math.max(Math.min(R,g),-g);var M=i[l]+R;M=e/(r-l)*v+M*(1-v);var k=t[l]*n+M*(1-n);i[l]=k,e-=k}i[r-1]=e}function r(t){for(var i=s(),h=a(i),o=d(x[0],x[1]),e=[0,0,0],r=[],n=t-1;n>=0;n--){for(var f=n%2?1-c()*o:0+c()*o,u=0;u<3;u++)e[u]=f*i[u]+(1-f)*h[u];for(var l="#",u=0;u<3;u++)l+=("0"+Math.round(255*e[u]).toString(16)).slice(-2);r[n]=l}return r}function n(t,i,h,s){p(h),f=d(1.2,2.4)*s,u=d(1,2.5)*f;var a=[],n=o(t.width,a),l=n.length;p(i);var c=r(l);p(h);for(var v=n.concat(),y=t.getContext("2d"),R=0;R<t.height;R++){for(var g=0,m=0;m<l;m++){y.fillStyle=c[m];var S=v[m];y.fillRect(g,R,S+1,1),g+=S}e(n,v,a,t.width,t.height,R)}}var f,u,l=t("./cheapSeed"),p=l.ga,c=l.oa,d=l.Ra,v=0,y=1,R=2,g=.12,m=g/8,S=30,b=100,M=[.4,.85],k=[.6,.9],T=[.75,.9],x=[.2,.5];h.fa=function(t,i,h,s){n(t,i,h,s)}},{"./cheapSeed":5}]},{},[2])(2)});