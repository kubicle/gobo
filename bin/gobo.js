!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.g)define([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.h=t()}}(function(){return function t(i,h,a){function s(e,r){if(!h[e]){if(!i[e]){var n="function"==typeof require&&require;if(!r&&n)return n(e,!0);if(o)return o(e,!0);var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}var f=h[e]={exports:{}};i[e][0].call(f.exports,function(t){var h=i[e][1][t];return s(h||t)},f,f.exports,t,i,h,a)}return h[e].exports}for(var o="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(t,i,h){"use strict";h.i=!0;var a=t("./wood.js"),s={9:[[5,5]],13:[[4,4],[10,4],[4,10],[10,10]],19:[[4,4],[10,4],[16,4],[4,10],[10,10],[16,10],[4,16],[10,16],[16,16]]},o=5,e=/[.,:;|`'!]/g,r=[[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],[.1,.12,.11,.1,.09,.09,.09,.09],[.12,.14,.13,.12,.12,.12]],n=function(){function t(t){this.width=t.widthPx,this.height=t.heightPx||t.widthPx,t.widthPx||(console.error("Invalid gobo widthPx: "+t.widthPx),this.width=this.height=100),this.isSketch=!!t.isSketch,this.j=!t.noCoords,this.k=t.marginPx||o,this.backgroundCanvas=t.backgroundCanvas,this.background=t.background}return t.prototype.l=function(t){return this.m=t,this.o(),this.isSketch||this.p(),this.q(),this.s(),this.canvas},t.prototype.render=function(){this.t(),this.u(),this.v(),this.j&&this.A(),this.B()},t.prototype.C=function(){return this.canvas},t.prototype.q=function(){this.D(this.width,this.height),this.F.textAlign="center",this.F.textBaseline="middle"},t.prototype.D=function(t,i){return this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=i,this.F=this.canvas.getContext("2d"),this.canvas},t.prototype.o=function(){var t=Math.min(this.width,this.height);this.gobanSize=this.m.gobanSize,this.j?(this.G=(t-2*this.k)/(this.gobanSize+2),this.G>10?(this.H=10,this.G=(t-2*this.k-2*this.H)/this.gobanSize):this.H=this.G,this.I=this.k+this.H):(this.G=(t-2*this.k)/this.gobanSize,this.I=this.k),this.J=this.G/2,this.K=.55*this.G,this.fontSize=.8*this.G,this.L=Math.round(this.I+this.G/2+(this.width-t)/2),this.M=Math.round(this.I+this.G/2+(this.height-t)/2),this.N=this.M+(this.gobanSize-1)*this.G,this.O=this.L+(this.gobanSize-1)*this.G},t.prototype.pixelToGridCoordinates=function(t,i){return[Math.round((t-this.L)/this.G),Math.round((this.N-i)/this.G)]},t.prototype.s=function(){if(!this.backgroundCanvas)if(this.background){if("#"===this.background[0]||"rgb"===this.background.substr(0,3).toLowerCase())this.backgroundColor=this.background;else if("wood"===this.background){if(this.isSketch||this.backgroundCanvas)return;var t=this.backgroundCanvas=document.createElement("canvas");t.width=200,t.height=200,a.P(t,Math.random())}}else this.backgroundColor="#c75"},t.prototype.p=function(){var t=this.G,i=t/2;this.R=this.D(t,t),this.S(i,i),this.T=[];for(var h=10;h>=0;h--)this.T.push(this.D(t,t)),this.U(i,i,this.J);this.V=[];for(var h=17;h>=0;h--)this.V.push(this.D(t,t)),this.W(i,i,this.J);this.X=[];for(var a=0;a<this.gobanSize;a++)for(var s=this.X[a]=[],h=0;h<this.gobanSize;h++)s.push(~~(11*Math.random()));this.Y=[];for(var a=0;a<this.gobanSize;a++)for(var s=this.Y[a]=[],h=0;h<this.gobanSize;h++){var o=h%3+a%3*3,e=h%6<3==a%6<3?0:1,r=o+9*e;s.push(r)}this.Z=this.D(t,t),this.W(i,i,this.J/2),this.$=this.D(t,t),this.U(i,i,this.J/2)},t.prototype._=function(){this.backgroundCanvas?this.F.fillStyle=this.F.createPattern(this.backgroundCanvas,"repeat"):this.F.fillStyle=this.backgroundColor},t.prototype.t=function(){this._(),this.F.fillRect(0,0,this.width,this.height)},t.prototype.u=function(){this.F.strokeStyle="#000",this.F.lineWidth=1,this.F.beginPath();for(var t=0;t<this.gobanSize;t++){var i=this.L+t*this.G;this.F.moveTo(i,this.M),this.F.lineTo(i,this.N);var h=this.M+t*this.G;this.F.moveTo(this.L,h),this.F.lineTo(this.O,h)}this.F.stroke()},t.prototype.v=function(){this.F.fillStyle="#000";var t=s[this.gobanSize];if(t)for(var i=0;i<t.length;i++){var h=t[i],a=(h[0]-1)*this.G+this.L,o=(h[1]-1)*this.G+this.M;this.F.beginPath(),this.F.arc(a,o,this.G/9,0,2*Math.PI),this.F.fill()}},t.prototype.A=function(){this.F.fillStyle="#000",this.F.font=this.H+"px Arial";for(var t="ABCDEFGHJKLMNOPQRSTUVWXYZ",i=this.J+this.I/2,h=this.L,a=this.M-i,s=this.N+i,o=0;o<this.gobanSize;o++)this.F.fillText(t[o],h,a),this.F.fillText(t[o],h,s),h+=this.G;for(var e=this.L-i,r=this.O+i,n=this.M,o=0;o<this.gobanSize;o++){var c=(this.gobanSize-o).toString();this.F.fillText(c,e,n),this.F.fillText(c,r,n),n+=this.G}},t.prototype.B=function(){for(var t=this.isSketch?1:2,i=0;i<t;i++)for(var h=0;h<this.gobanSize;h++)for(var a=0;a<this.gobanSize;a++)this.aa(a,h,i)},t.prototype.aa=function(t,i,h){var a=t*this.G+this.L,s=this.N-i*this.G,o=this.m.ba(t,i);-1!==o.ca&&(0!==h||this.isSketch?this.ea(a,s,o.ca,t,i):this.da(a,s)),(-1===o.ca||1===h||this.isSketch)&&(o.mark&&this.fa(a,s,o),o.label&&this.ga(a,s,o,o.label))},t.prototype.da=function(t,i){var h=.25*this.J,a=this.J-h;this.F.drawImage(this.R,t-a,i-a)},t.prototype.ea=function(t,i,h,a,s){if(this.isSketch)return this.ha(t,i,h,this.J);var o;o=0===h?this.T[this.X[s][a]]:this.V[this.Y[s][a]],this.F.drawImage(o,t-this.J,i-this.J)},t.prototype.ha=function(t,i,h,a){this.F.fillStyle=0===h?"rgb(0,0,0)":"rgb(255,255,255)",this.F.beginPath(),this.F.arc(t,i,.93*a,0,2*Math.PI),this.F.fill()},t.prototype.ia=function(t,i,h,a){if(this.isSketch||-1!==a){var s=.4*this.J;return this.ha(t,i,h,s)}var s=this.J,o=0===h?this.$:this.Z;this.F.drawImage(o,t-s,i-s,2*s,2*s)},t.prototype.S=function(t,i){var h=.1*this.J,a=.95*this.J,s=this.F.createRadialGradient(t,i,a-1-h,t,i,a+h);s.addColorStop(0,"rgba(32,32,32,0.5)"),s.addColorStop(1,"rgba(62,62,62,0)"),this.F.fillStyle=s,this.F.beginPath(),this.F.arc(t,i,a+h,0,2*Math.PI,!0),this.F.fill()},t.prototype.ja=function(t,i,h,a,s,o,e){var r=h/5,n=this.F.createRadialGradient(t-2*r,i-2*r,o*h,t-r,i-r,e*h);n.addColorStop(0,a),n.addColorStop(1,s),this.F.beginPath(),this.F.fillStyle=n,this.F.arc(t,i,.95*h,0,2*Math.PI,!0),this.F.fill()},t.prototype.U=function(t,i,h){var a=.8-.2*Math.random(),s=40*Math.random()+76,o="rgb("+~~(10*Math.random()+s)+","+~~(10*Math.random()+s)+","+~~(10*Math.random()+s)+")";this.ja(t,i,h,o,"#000",.01,a)},t.prototype.W=function(t,i,h){this.ja(t,i,h,"#fff","#aaa",.33,1);var a=r[~~(3*Math.random())],s=2*Math.random()*Math.PI,o=1+1.5*Math.random(),e=.2+.3*Math.random();this.ka(t,i,h,s,a,e,o)},t.prototype.ka=function(t,i,h,a,s,o,e){for(var r=a,n=a,c=0;c<s.length;c++){r+=s[c],n-=s[c];var f=.15*Math.random()+0;this.la(t,i,h,r,n,o,e,f)}},t.prototype.la=function(t,i,h,a,s,o,e,r){var n=this.F;r=~~(100*r)/100,n.strokeStyle="rgba(128,128,128,"+r+")",n.lineWidth=h/30*e,n.beginPath(),h-=Math.max(1,n.lineWidth);var c,f,u,l,p=t+h*Math.cos(a*Math.PI),d=i+h*Math.sin(a*Math.PI),v=t+h*Math.cos(s*Math.PI),g=i+h*Math.sin(s*Math.PI);v>p?(c=(g-d)/(v-p),f=Math.atan(c)):v===p?f=Math.PI/2:(c=(g-d)/(v-p),f=Math.atan(c)-Math.PI);var b=o*h;u=Math.sin(f)*b,l=Math.cos(f)*b;var y=p+u,S=d-l,k=v+u,M=g-l;n.moveTo(p,d),n.bezierCurveTo(y,S,k,M,v,g),n.stroke()},t.prototype.ma=function(t,i,h){switch(h.ca){case-1:if("+"!==h.mark[0]){this._();var a=.8*this.G;this.F.fillRect(t-a/2,i-a/2,a,a)}return"#000";case 0:return"#fff";case 1:return"#000"}},t.prototype.fa=function(t,i,h){var a=this.F,s=h.mark.split(":"),o=s[0],e=s.length>1?s[1].split(","):[],r=(parseInt(e[0])/10||1)*this.K,n=r/2,c=.5*(parseInt(e[1])||5);switch(o){case"[]":a.strokeStyle=this.ma(t,i,h),a.lineWidth=c,a.strokeRect(t-n,i-n,r,r);break;case"O":a.strokeStyle=this.ma(t,i,h),a.lineWidth=c,a.beginPath(),a.arc(t,i,n,0,2*Math.PI),a.stroke();break;case"*":a.fillStyle=this.ma(t,i,h),a.font=1.5*this.fontSize+"px Arial",a.fillText("*",t,i+.35*this.fontSize);break;case"+":a.strokeStyle=this.ma(t,i,h),a.lineWidth=c,a.beginPath(),a.moveTo(t-n,i),a.lineTo(t+n,i),a.moveTo(t,i-n),a.lineTo(t,i+n),a.stroke();break;case"+?":a.fillStyle="#888",a.fillRect(t-n,i-n,r,r);break;case"+Bo":case"+Wo":this.ia(t,i,"B"===o[1]?0:1,h.ca);break;default:console.error("Unknown mark type: "+h.mark)}},t.prototype.ga=function(t,i,h,a){this.F.fillStyle=this.ma(t,i,h),h.style&&(this.F.fillStyle=h.style);var s=a.replace(e,"").length,o=a.length-s,r=s+.5*o,n=1.2-.2*r,c=Math.max(this.fontSize*n,12);this.F.font=c+"px Arial",this.F.fillText(a,t,i)},t}();h.na=n},{"./wood.js":6}],2:[function(t,i,h){"use strict";h.i=!0;var a=t("./LogicalBoard"),s=t("./BoardRenderer"),o=function(){function t(t){this.oa=new a.pa(t.gobanSize||19),this.qa=new s.na(t),this.canvas=this.qa.l(this.oa)}return t.prototype.render=function(){this.qa.render()},t.prototype.setStoneAt=function(t,i,h){this.oa.setStoneAt(t,i,h)},t.prototype.clearVertexAt=function(t,i){this.oa.clearVertexAt(t,i)},t.prototype.getStoneColorAt=function(t,i){return this.oa.ba(t,i).ca},t.prototype.setLabelAt=function(t,i,h,a){this.oa.setLabelAt(t,i,h,a)},t.prototype.setMarkAt=function(t,i,h){this.oa.setMarkAt(t,i,h)},t.prototype.pixelToGridCoordinates=function(t,i){return this.qa.pixelToGridCoordinates(t,i)},t}();h.Gobo=o},{"./BoardRenderer":1,"./LogicalBoard":3}],3:[function(t,i,h){"use strict";h.i=!0;var a=t("./Vertex"),s=function(){function t(t){this.gobanSize=t,this.ra=new Array(t);for(var i=0;i<t;i++){this.ra[i]=new Array(t);for(var h=0;h<t;h++)this.ra[i][h]=new a.sa}}return t.prototype.ba=function(t,i){var h=this.ra[i][t];if(!h)throw new Error("Invalid coordinates: "+t+","+i);return h},t.prototype.clearVertexAt=function(t,i){this.ba(t,i).clear()},t.prototype.setStoneAt=function(t,i,h){this.ba(t,i).ta(h)},t.prototype.setLabelAt=function(t,i,h,a){var s=this.ba(t,i);s.ua(h),a&&s.va(a)},t.prototype.setMarkAt=function(t,i,h){this.ba(t,i).wa(h)},t}();h.pa=s},{"./Vertex":4}],4:[function(t,i,h){"use strict";h.i=!0;var a=function(){function t(){this.clear()}return t.prototype.clear=function(){this.ca=-1,this.label="",this.mark=""},t.prototype.ta=function(t){this.ca=t},t.prototype.ua=function(t){this.label=t},t.prototype.wa=function(t){this.mark=t},t.prototype.va=function(t){this.style=t},t}();h.sa=a},{}],5:[function(t,i,h){"use strict";var a;h.xa=function(t){if(!(t>=0&&t<=1))throw new Error("Seed must be between 0 and 1");a=t},h.ya=function(){var t=43046721*a+.236067977;return a=t-Math.floor(t)},h.za=function(t,i){return h.ya()*(i-t)+t}},{}],6:[function(t,i,h){function a(){var t=[];t[d]=1;var i=t[v]=p(M[0],M[1]);return t[g]=p(i*m[0],i*m[1]),t}function s(t){for(var i=[0,0,0],h=p(F[0],F[1]),a=0;a<3;a++)i[a]=t[a]*h;return i}function o(t,i){for(var h=~~(t/c),a=t,s=[],o=h;o>=2;o--){var e=(l()+.5)*(a/o);s.push(e),a-=e,i.push(0)}return s.push(a),s}function e(t,i,h,a,s,o){for(var e=a,r=i.length,n=Math.max((o-s)/k+1,0),u=0;u<r-1;u++){var p=(u+.5)*c,d=a-e+i[u]/2,v=Math.max((d-a)/S+1,0),g=Math.min(Math.abs(d-p)/f,1),M=h[u];M=M*(1-g)+(l()-.5)*y,h[u]=M=Math.max(Math.min(M,b),-b);var m=i[u]+M;m=e/(r-u)*v+m*(1-v);var F=t[u]*n+m*(1-n);i[u]=F,e-=F}i[r-1]=e}function r(t){for(var i=a(),h=s(i),o=p(w[0],w[1]),e=[0,0,0],r=[],n=t-1;n>=0;n--){for(var c=n%2?1-l()*o:0+l()*o,f=0;f<3;f++)e[f]=c*i[f]+(1-c)*h[f];for(var u="#",f=0;f<3;f++)u+=("0"+Math.round(255*e[f]).toString(16)).slice(-2);r[n]=u}return r}function n(t){c=p(1.2,2.4),f=p(1,2.5)*c;for(var i=[],h=o(t.width,i),a=h.length,s=r(a),n=h.concat(),u=t.getContext("2d"),l=0;l<t.height;l++){for(var d=0,v=0;v<a;v++){u.fillStyle=s[v];var g=n[v];u.fillRect(d,l,g+1,1),d+=g}e(h,n,i,t.width,t.height,l)}}var c,f,u=t("./cheapSeed"),l=u.ya,p=u.za,d=0,v=1,g=2,b=.12,y=b/8,S=30,k=100,M=[.4,.85],m=[.6,.9],F=[.75,.9],w=[.2,.5];h.P=function(t,i){u.xa(i),n(t)}},{"./cheapSeed":5}]},{},[2])(2)});